@page "/profile";

@using PCS.Auth.Services
@using PCS.Front.Components.Custom

@inject IUserManager userManager
@inject NavigationManager navigationManager

<RedButton OnCallback=@OnLogout IsDisabled=@isLoading>
    <Loader IsLoading=@isLoading>
        Logout
    </Loader>
</RedButton>

@code {

    private bool isLoading = false;

    private async Task OnLogout()
    {
        if (!await userManager.IsLogged()) return;

        isLoading = true;
        await userManager.Logout();
        isLoading = false;

        navigationManager.NavigateTo("", true, false);
    }
}